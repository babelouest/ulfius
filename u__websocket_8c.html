<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ulfius: src/u_websocket.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ulfius
   </div>
   <div id="projectbrief">HTTP Framework for REST Applications in C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">u_websocket.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="u__private_8h_source.html">u_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ulfius_8h_source.html">ulfius.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="yuarel_8h_source.html">yuarel.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;netdb.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;gnutls/crypto.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a890d84b9b5d0b0aede9eea1092a7a10a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a890d84b9b5d0b0aede9eea1092a7a10a">STR_HELPER</a>(x)&#160;&#160;&#160;#x</td></tr>
<tr class="separator:a890d84b9b5d0b0aede9eea1092a7a10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18d295a837ac71add5578860b55e5502"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a18d295a837ac71add5578860b55e5502">STR</a>(x)&#160;&#160;&#160;<a class="el" href="u__websocket_8c.html#a890d84b9b5d0b0aede9eea1092a7a10a">STR_HELPER</a>(x)</td></tr>
<tr class="separator:a18d295a837ac71add5578860b55e5502"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a26e2c4201eaf8c918227a344445e4c66"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a26e2c4201eaf8c918227a344445e4c66">ulfius_thread_websocket_manager_run</a> (void *args)</td></tr>
<tr class="separator:a26e2c4201eaf8c918227a344445e4c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13977c95392d2ae82decbb9337ea030f"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a13977c95392d2ae82decbb9337ea030f">ulfius_thread_websocket</a> (void *data)</td></tr>
<tr class="separator:a13977c95392d2ae82decbb9337ea030f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6dd5bf28c21a2ef655905d4ecb02aa6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ab6dd5bf28c21a2ef655905d4ecb02aa6">ulfius_start_websocket_cb</a> (void *cls, struct MHD_Connection *connection, void *con_cls, const char *extra_in, size_t extra_in_size, MHD_socket sock, struct MHD_UpgradeResponseHandle *urh)</td></tr>
<tr class="separator:ab6dd5bf28c21a2ef655905d4ecb02aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab0b62c5d80d804540e1a878f10087a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a7ab0b62c5d80d804540e1a878f10087a">ulfius_check_handshake_response</a> (const char *key, const char *response)</td></tr>
<tr class="separator:a7ab0b62c5d80d804540e1a878f10087a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04440f029f39cedeae6f05ddb3784e4e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a04440f029f39cedeae6f05ddb3784e4e">ulfius_generate_handshake_answer</a> (const char *key, char *out_digest)</td></tr>
<tr class="separator:a04440f029f39cedeae6f05ddb3784e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a963fdcfe57178af33cbac6a0cb9ec1ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a963fdcfe57178af33cbac6a0cb9ec1ac">ulfius_init_websocket_message_list</a> (struct _websocket_message_list *message_list)</td></tr>
<tr class="separator:a963fdcfe57178af33cbac6a0cb9ec1ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8b5553c389a1f63a45ed700dadd1273"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#af8b5553c389a1f63a45ed700dadd1273">ulfius_push_websocket_message</a> (struct _websocket_message_list *message_list, struct _websocket_message *message)</td></tr>
<tr class="separator:af8b5553c389a1f63a45ed700dadd1273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd7a4851eb454941ef3cb13077248f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a9fd7a4851eb454941ef3cb13077248f9">ulfius_check_list_match</a> (const char *source, const char *match, const char *separator, char **result)</td></tr>
<tr class="separator:a9fd7a4851eb454941ef3cb13077248f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f173170cbe743d963f9d63e4075dcbc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a8f173170cbe743d963f9d63e4075dcbc">ulfius_check_first_match</a> (const char *source, const char *match, const char *separator, char **result)</td></tr>
<tr class="separator:a8f173170cbe743d963f9d63e4075dcbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843e43a4a48492007fec35a6f13e74e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a843e43a4a48492007fec35a6f13e74e8">ulfius_close_websocket</a> (struct _websocket *websocket)</td></tr>
<tr class="separator:a843e43a4a48492007fec35a6f13e74e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e489618a6da698838818fdd0b12894"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a40e489618a6da698838818fdd0b12894">ulfius_instance_add_websocket_active</a> (struct <a class="el" href="struct__u__instance.html">_u_instance</a> *instance, struct _websocket *websocket)</td></tr>
<tr class="separator:a40e489618a6da698838818fdd0b12894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ae946ec59c1e316f1dfcc2ae89e817"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#aa2ae946ec59c1e316f1dfcc2ae89e817">ulfius_instance_remove_websocket_active</a> (struct <a class="el" href="struct__u__instance.html">_u_instance</a> *instance, struct _websocket *websocket)</td></tr>
<tr class="separator:aa2ae946ec59c1e316f1dfcc2ae89e817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60f10e65b744bc9391c520e8f9245af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ad60f10e65b744bc9391c520e8f9245af">ulfius_websocket_send_fragmented_message</a> (struct _websocket_manager *websocket_manager, const uint8_t opcode, const uint64_t data_len, const char *data, const uint64_t fragment_len)</td></tr>
<tr class="separator:ad60f10e65b744bc9391c520e8f9245af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53ce5b968d66afa962c85e17e326bbd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ad53ce5b968d66afa962c85e17e326bbd">ulfius_websocket_send_message</a> (struct _websocket_manager *websocket_manager, const uint8_t opcode, const uint64_t data_len, const char *data)</td></tr>
<tr class="separator:ad53ce5b968d66afa962c85e17e326bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d13f9a4d0039d32f5e409e2993f08d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a1d13f9a4d0039d32f5e409e2993f08d7">ulfius_websocket_send_json_message</a> (struct _websocket_manager *websocket_manager, json_t *message)</td></tr>
<tr class="separator:a1d13f9a4d0039d32f5e409e2993f08d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae768a7ec5f7e8be229d8c2642022c6ce"><td class="memItemLeft" align="right" valign="top">struct _websocket_message *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ae768a7ec5f7e8be229d8c2642022c6ce">ulfius_websocket_pop_first_message</a> (struct _websocket_message_list *message_list)</td></tr>
<tr class="separator:ae768a7ec5f7e8be229d8c2642022c6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4aada66b8cb2ccde8f6c5eccfbf35dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#af4aada66b8cb2ccde8f6c5eccfbf35dd">ulfius_clear_websocket_message</a> (struct _websocket_message *message)</td></tr>
<tr class="separator:af4aada66b8cb2ccde8f6c5eccfbf35dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc6ec22bf92badf1d0d0c05e47110d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a2dc6ec22bf92badf1d0d0c05e47110d5">ulfius_clear_websocket</a> (struct _websocket *websocket)</td></tr>
<tr class="separator:a2dc6ec22bf92badf1d0d0c05e47110d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e51dfbfcdc860e16eee84fc8168df76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a4e51dfbfcdc860e16eee84fc8168df76">ulfius_clear_websocket_message_list</a> (struct _websocket_message_list *message_list)</td></tr>
<tr class="separator:a4e51dfbfcdc860e16eee84fc8168df76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80bd0517bd879f75d7ed31afd0ab0585"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a80bd0517bd879f75d7ed31afd0ab0585">ulfius_init_websocket</a> (struct _websocket *websocket)</td></tr>
<tr class="separator:a80bd0517bd879f75d7ed31afd0ab0585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de5a088f7eac729699d22c94fc2723d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a2de5a088f7eac729699d22c94fc2723d">ulfius_init_websocket_manager</a> (struct _websocket_manager *websocket_manager)</td></tr>
<tr class="separator:a2de5a088f7eac729699d22c94fc2723d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3c8c2a4e531557098c9851e1b667b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a6a3c8c2a4e531557098c9851e1b667b9">ulfius_clear_websocket_manager</a> (struct _websocket_manager *websocket_manager)</td></tr>
<tr class="separator:a6a3c8c2a4e531557098c9851e1b667b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf9d96944f3d4fc3930075011cbb4af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a9cf9d96944f3d4fc3930075011cbb4af">ulfius_set_websocket_response</a> (struct <a class="el" href="struct__u__response.html">_u_response</a> *response, const char *websocket_protocol, const char *websocket_extensions, void(*websocket_manager_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_manager_user_data), void *websocket_manager_user_data, void(*websocket_incoming_message_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, const struct _websocket_message *message, void *websocket_incoming_user_data), void *websocket_incoming_user_data, void(*websocket_onclose_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_onclose_user_data), void *websocket_onclose_user_data)</td></tr>
<tr class="separator:a9cf9d96944f3d4fc3930075011cbb4af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1738c8572795e4264c250a2a7d5ed2ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a1738c8572795e4264c250a2a7d5ed2ee">ulfius_websocket_send_close_signal</a> (struct _websocket_manager *websocket_manager)</td></tr>
<tr class="separator:a1738c8572795e4264c250a2a7d5ed2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e85c4ffc47c3161f6b016ec56fb3e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a86e85c4ffc47c3161f6b016ec56fb3e7">ulfius_websocket_status</a> (struct _websocket_manager *websocket_manager)</td></tr>
<tr class="separator:a86e85c4ffc47c3161f6b016ec56fb3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55edeedda06a0a1d1792da77bef54cb4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a55edeedda06a0a1d1792da77bef54cb4">ulfius_websocket_wait_close</a> (struct _websocket_manager *websocket_manager, unsigned int timeout)</td></tr>
<tr class="separator:a55edeedda06a0a1d1792da77bef54cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad33e95eec6131d591555cc9e51e43512"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ad33e95eec6131d591555cc9e51e43512">ulfius_set_websocket_request</a> (struct <a class="el" href="struct__u__request.html">_u_request</a> *request, const char *url, const char *websocket_protocol, const char *websocket_extensions)</td></tr>
<tr class="separator:ad33e95eec6131d591555cc9e51e43512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a996074d603ae74f46fe2a39fbb3ac921"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a996074d603ae74f46fe2a39fbb3ac921">ulfius_open_websocket_client_connection</a> (struct <a class="el" href="struct__u__request.html">_u_request</a> *request, void(*websocket_manager_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_manager_user_data), void *websocket_manager_user_data, void(*websocket_incoming_message_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, const struct _websocket_message *message, void *websocket_incoming_user_data), void *websocket_incoming_user_data, void(*websocket_onclose_callback)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_onclose_user_data), void *websocket_onclose_user_data, struct _websocket_client_handler *websocket_client_handler, struct <a class="el" href="struct__u__response.html">_u_response</a> *response)</td></tr>
<tr class="separator:a996074d603ae74f46fe2a39fbb3ac921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f01cd89ce14766ebb9572645e36ec8f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a0f01cd89ce14766ebb9572645e36ec8f">ulfius_websocket_client_connection_send_close_signal</a> (struct _websocket_client_handler *websocket_client_handler)</td></tr>
<tr class="separator:a0f01cd89ce14766ebb9572645e36ec8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad193bf928fd587b3fdad653bd7c82301"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#ad193bf928fd587b3fdad653bd7c82301">ulfius_websocket_client_connection_close</a> (struct _websocket_client_handler *websocket_client_handler)</td></tr>
<tr class="separator:ad193bf928fd587b3fdad653bd7c82301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48680b98db86851f2273ab2d22f8e61d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a48680b98db86851f2273ab2d22f8e61d">ulfius_websocket_client_connection_status</a> (struct _websocket_client_handler *websocket_client_handler)</td></tr>
<tr class="separator:a48680b98db86851f2273ab2d22f8e61d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44701d788570a3a6ae72102786c261fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="u__websocket_8c.html#a44701d788570a3a6ae72102786c261fd">ulfius_websocket_client_connection_wait_close</a> (struct _websocket_client_handler *websocket_client_handler, unsigned int timeout)</td></tr>
<tr class="separator:a44701d788570a3a6ae72102786c261fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a890d84b9b5d0b0aede9eea1092a7a10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890d84b9b5d0b0aede9eea1092a7a10a">&#9670;&nbsp;</a></span>STR_HELPER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STR_HELPER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;#x</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ulfius Framework</p>
<p>REST framework library</p>
<p><a class="el" href="u__websocket_8c.html">u_websocket.c</a>: websocket implementation</p>
<p>Copyright 2017-2020 Nicolas Mora <a href="#" onclick="location.href='mai'+'lto:'+'mai'+'l@'+'bab'+'el'+'oue'+'st'+'.or'+'g'; return false;">mail@<span style="display: none;">.nosp@m.</span>babe<span style="display: none;">.nosp@m.</span>loues<span style="display: none;">.nosp@m.</span>t.or<span style="display: none;">.nosp@m.</span>g</a></p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; version 2.1 of the License.</p>
<p>This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU GENERAL PUBLIC LICENSE for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this library. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>

</div>
</div>
<a id="a18d295a837ac71add5578860b55e5502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18d295a837ac71add5578860b55e5502">&#9670;&nbsp;</a></span>STR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="u__websocket_8c.html#a890d84b9b5d0b0aede9eea1092a7a10a">STR_HELPER</a>(x)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a26e2c4201eaf8c918227a344445e4c66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26e2c4201eaf8c918227a344445e4c66">&#9670;&nbsp;</a></span>ulfius_thread_websocket_manager_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ulfius_thread_websocket_manager_run </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run the websocket manager in a separated detached thread </p>

</div>
</div>
<a id="a13977c95392d2ae82decbb9337ea030f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13977c95392d2ae82decbb9337ea030f">&#9670;&nbsp;</a></span>ulfius_thread_websocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ulfius_thread_websocket </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run websocket in a separate thread then sets a listening message loop Complete the callback when the websocket is closed The websocket can be closed by the client, the manager, the program, or on network disconnect </p>

</div>
</div>
<a id="ab6dd5bf28c21a2ef655905d4ecb02aa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6dd5bf28c21a2ef655905d4ecb02aa6">&#9670;&nbsp;</a></span>ulfius_start_websocket_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulfius_start_websocket_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct MHD_Connection *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>con_cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extra_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extra_in_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MHD_socket&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct MHD_UpgradeResponseHandle *&#160;</td>
          <td class="paramname"><em>urh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Websocket callback function for MHD Starts the websocket manager if set, </p>

</div>
</div>
<a id="a7ab0b62c5d80d804540e1a878f10087a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ab0b62c5d80d804540e1a878f10087a">&#9670;&nbsp;</a></span>ulfius_check_handshake_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_check_handshake_response </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the response corresponds to the transformation of the key with the magic string </p>

</div>
</div>
<a id="a04440f029f39cedeae6f05ddb3784e4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04440f029f39cedeae6f05ddb3784e4e">&#9670;&nbsp;</a></span>ulfius_generate_handshake_answer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_generate_handshake_answer </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>out_digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generates a handhshake answer from the key given in parameter </p>

</div>
</div>
<a id="a963fdcfe57178af33cbac6a0cb9ec1ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a963fdcfe57178af33cbac6a0cb9ec1ac">&#9670;&nbsp;</a></span>ulfius_init_websocket_message_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_init_websocket_message_list </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_message_list *&#160;</td>
          <td class="paramname"><em>message_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a websocket message list Return U_OK on success </p>

</div>
</div>
<a id="af8b5553c389a1f63a45ed700dadd1273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8b5553c389a1f63a45ed700dadd1273">&#9670;&nbsp;</a></span>ulfius_push_websocket_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_push_websocket_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_message_list *&#160;</td>
          <td class="paramname"><em>message_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct _websocket_message *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append a message in a message list Return U_OK on success </p>

</div>
</div>
<a id="a9fd7a4851eb454941ef3cb13077248f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd7a4851eb454941ef3cb13077248f9">&#9670;&nbsp;</a></span>ulfius_check_list_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_check_list_match </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a match list between two list of items If match is NULL, then return source duplicate Returned value must be u_free'd after use </p>

</div>
</div>
<a id="a8f173170cbe743d963f9d63e4075dcbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f173170cbe743d963f9d63e4075dcbc">&#9670;&nbsp;</a></span>ulfius_check_first_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_check_first_match </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the first match between two list of items If match is NULL, then return the first element of source Returned value must be u_free'd after use </p>

</div>
</div>
<a id="a843e43a4a48492007fec35a6f13e74e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843e43a4a48492007fec35a6f13e74e8">&#9670;&nbsp;</a></span>ulfius_close_websocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_close_websocket </td>
          <td>(</td>
          <td class="paramtype">struct _websocket *&#160;</td>
          <td class="paramname"><em>websocket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the websocket </p>

</div>
</div>
<a id="a40e489618a6da698838818fdd0b12894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e489618a6da698838818fdd0b12894">&#9670;&nbsp;</a></span>ulfius_instance_add_websocket_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_instance_add_websocket_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct__u__instance.html">_u_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct _websocket *&#160;</td>
          <td class="paramname"><em>websocket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a websocket in the list of active websockets of the instance </p>

</div>
</div>
<a id="aa2ae946ec59c1e316f1dfcc2ae89e817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ae946ec59c1e316f1dfcc2ae89e817">&#9670;&nbsp;</a></span>ulfius_instance_remove_websocket_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_instance_remove_websocket_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct__u__instance.html">_u_instance</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct _websocket *&#160;</td>
          <td class="paramname"><em>websocket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove a websocket from the list of active websockets of the instance </p>

</div>
</div>
<a id="ad60f10e65b744bc9391c520e8f9245af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60f10e65b744bc9391c520e8f9245af">&#9670;&nbsp;</a></span>ulfius_websocket_send_fragmented_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_send_fragmented_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>fragment_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Common websocket functions Send a fragmented message in the websocket each fragment size will be at most fragment_len Return U_OK on success </p>

</div>
</div>
<a id="ad53ce5b968d66afa962c85e17e326bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53ce5b968d66afa962c85e17e326bbd">&#9670;&nbsp;</a></span>ulfius_websocket_send_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_send_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a message in the websocket Return U_OK on success </p>

</div>
</div>
<a id="a1d13f9a4d0039d32f5e409e2993f08d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d13f9a4d0039d32f5e409e2993f08d7">&#9670;&nbsp;</a></span>ulfius_websocket_send_json_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_send_json_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">json_t *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a JSON message in the websocket Return U_OK on success </p>

</div>
</div>
<a id="ae768a7ec5f7e8be229d8c2642022c6ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae768a7ec5f7e8be229d8c2642022c6ce">&#9670;&nbsp;</a></span>ulfius_websocket_pop_first_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct _websocket_message* ulfius_websocket_pop_first_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_message_list *&#160;</td>
          <td class="paramname"><em>message_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the first message of the message list Return NULL if message_list has no message Returned value must be cleared after use </p>

</div>
</div>
<a id="af4aada66b8cb2ccde8f6c5eccfbf35dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4aada66b8cb2ccde8f6c5eccfbf35dd">&#9670;&nbsp;</a></span>ulfius_clear_websocket_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulfius_clear_websocket_message </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_message *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear data of a websocket message </p>

</div>
</div>
<a id="a2dc6ec22bf92badf1d0d0c05e47110d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dc6ec22bf92badf1d0d0c05e47110d5">&#9670;&nbsp;</a></span>ulfius_clear_websocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_clear_websocket </td>
          <td>(</td>
          <td class="paramtype">struct _websocket *&#160;</td>
          <td class="paramname"><em>websocket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Init/clear websocket functions Clear all data related to the websocket </p>

</div>
</div>
<a id="a4e51dfbfcdc860e16eee84fc8168df76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e51dfbfcdc860e16eee84fc8168df76">&#9670;&nbsp;</a></span>ulfius_clear_websocket_message_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulfius_clear_websocket_message_list </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_message_list *&#160;</td>
          <td class="paramname"><em>message_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear data of a websocket message list </p>

</div>
</div>
<a id="a80bd0517bd879f75d7ed31afd0ab0585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80bd0517bd879f75d7ed31afd0ab0585">&#9670;&nbsp;</a></span>ulfius_init_websocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_init_websocket </td>
          <td>(</td>
          <td class="paramtype">struct _websocket *&#160;</td>
          <td class="paramname"><em>websocket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a struct _websocket return U_OK on success </p>

</div>
</div>
<a id="a2de5a088f7eac729699d22c94fc2723d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2de5a088f7eac729699d22c94fc2723d">&#9670;&nbsp;</a></span>ulfius_init_websocket_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_init_websocket_manager </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a struct _websocket_manager return U_OK on success </p>

</div>
</div>
<a id="a6a3c8c2a4e531557098c9851e1b667b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3c8c2a4e531557098c9851e1b667b9">&#9670;&nbsp;</a></span>ulfius_clear_websocket_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ulfius_clear_websocket_manager </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear data of a websocket_manager </p>

</div>
</div>
<a id="a9cf9d96944f3d4fc3930075011cbb4af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf9d96944f3d4fc3930075011cbb4af">&#9670;&nbsp;</a></span>ulfius_set_websocket_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_set_websocket_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct__u__response.html">_u_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>websocket_protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>websocket_extensions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_manager_user_data)&#160;</td>
          <td class="paramname"><em>websocket_manager_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_manager_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, const struct _websocket_message *message, void *websocket_incoming_user_data)&#160;</td>
          <td class="paramname"><em>websocket_incoming_message_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_incoming_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_onclose_user_data)&#160;</td>
          <td class="paramname"><em>websocket_onclose_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_onclose_user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Server websocket functions Set a websocket in the response You must set at least websocket_manager_callback or websocket_incoming_message_callback  response: struct <a class="el" href="struct__u__response.html" title="definition of the parameters available in a struct _u_response ">_u_response</a> to send back the websocket initialization, mandatory websocket_protocol: list of protocols, separated by a comma, or NULL if all protocols are accepted websocket_extensions: list of extensions, separated by a comma, or NULL if all extensions are accepted websocket_manager_callback: callback function called right after the handshake acceptance, optional websocket_manager_user_data: any data that will be given to the websocket_manager_callback, optional websocket_incoming_message_callback: callback function called on each incoming complete message, optional websocket_incoming_user_data: any data that will be given to the websocket_incoming_message_callback, optional websocket_onclose_callback: callback function called right before closing the websocket, must be complete for the websocket to close websocket_onclose_user_data: any data that will be given to the websocket_onclose_callback, optional  value: U_OK on success </p>

</div>
</div>
<a id="a1738c8572795e4264c250a2a7d5ed2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1738c8572795e4264c250a2a7d5ed2ee">&#9670;&nbsp;</a></span>ulfius_websocket_send_close_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_send_close_signal </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the websocket in closing mode The websocket will not necessarily be closed at the return of this function, it will process through the end of the <code>websocket_manager_callback</code> and the <code>websocket_onclose_callback</code> calls first. return U_OK on success or U_ERROR on error </p>

</div>
</div>
<a id="a86e85c4ffc47c3161f6b016ec56fb3e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e85c4ffc47c3161f6b016ec56fb3e7">&#9670;&nbsp;</a></span>ulfius_websocket_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_status </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the status of the websocket connection Returned values can be U_WEBSOCKET_STATUS_OPEN or U_WEBSOCKET_STATUS_CLOSE wether the websocket is open or closed, or U_WEBSOCKET_STATUS_ERROR on error </p>

</div>
</div>
<a id="a55edeedda06a0a1d1792da77bef54cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55edeedda06a0a1d1792da77bef54cb4">&#9670;&nbsp;</a></span>ulfius_websocket_wait_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_wait_close </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_manager *&#160;</td>
          <td class="paramname"><em>websocket_manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait until the websocket connection is closed or the timeout in milliseconds is reached if timeout is 0, no timeout is set Returned values can be U_WEBSOCKET_STATUS_OPEN or U_WEBSOCKET_STATUS_CLOSE wether the websocket is open or closed, or U_WEBSOCKET_STATUS_ERROR on error </p>

</div>
</div>
<a id="ad33e95eec6131d591555cc9e51e43512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33e95eec6131d591555cc9e51e43512">&#9670;&nbsp;</a></span>ulfius_set_websocket_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_set_websocket_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct__u__request.html">_u_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>websocket_protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>websocket_extensions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set values for a struct <a class="el" href="struct__u__request.html" title="definition of the parameters available in a struct _u_request ">_u_request</a> to open a websocket request must be previously initialized Return U_OK on success </p>

</div>
</div>
<a id="a996074d603ae74f46fe2a39fbb3ac921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a996074d603ae74f46fe2a39fbb3ac921">&#9670;&nbsp;</a></span>ulfius_open_websocket_client_connection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_open_websocket_client_connection </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct__u__request.html">_u_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_manager_user_data)&#160;</td>
          <td class="paramname"><em>websocket_manager_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_manager_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, const struct _websocket_message *message, void *websocket_incoming_user_data)&#160;</td>
          <td class="paramname"><em>websocket_incoming_message_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_incoming_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(const struct <a class="el" href="struct__u__request.html">_u_request</a> *request, struct _websocket_manager *websocket_manager, void *websocket_onclose_user_data)&#160;</td>
          <td class="paramname"><em>websocket_onclose_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>websocket_onclose_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct _websocket_client_handler *&#160;</td>
          <td class="paramname"><em>websocket_client_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct__u__response.html">_u_response</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a websocket client connection Return U_OK on success </p>

</div>
</div>
<a id="a0f01cd89ce14766ebb9572645e36ec8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f01cd89ce14766ebb9572645e36ec8f">&#9670;&nbsp;</a></span>ulfius_websocket_client_connection_send_close_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_client_connection_send_close_signal </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_client_handler *&#160;</td>
          <td class="paramname"><em>websocket_client_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send a close signal to the websocket return U_OK when the signal is sent or U_ERROR on error </p>

</div>
</div>
<a id="ad193bf928fd587b3fdad653bd7c82301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad193bf928fd587b3fdad653bd7c82301">&#9670;&nbsp;</a></span>ulfius_websocket_client_connection_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_client_connection_close </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_client_handler *&#160;</td>
          <td class="paramname"><em>websocket_client_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes a websocket client connection return U_OK when the websocket is closed or U_ERROR on error </p>

</div>
</div>
<a id="a48680b98db86851f2273ab2d22f8e61d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48680b98db86851f2273ab2d22f8e61d">&#9670;&nbsp;</a></span>ulfius_websocket_client_connection_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_client_connection_status </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_client_handler *&#160;</td>
          <td class="paramname"><em>websocket_client_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the status of the websocket client connection Returned values can be U_WEBSOCKET_STATUS_OPEN or U_WEBSOCKET_STATUS_CLOSE wether the websocket is open or closed, or U_WEBSOCKET_STATUS_ERROR on error </p>

</div>
</div>
<a id="a44701d788570a3a6ae72102786c261fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44701d788570a3a6ae72102786c261fd">&#9670;&nbsp;</a></span>ulfius_websocket_client_connection_wait_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ulfius_websocket_client_connection_wait_close </td>
          <td>(</td>
          <td class="paramtype">struct _websocket_client_handler *&#160;</td>
          <td class="paramname"><em>websocket_client_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wait until the websocket client connection is closed or the timeout in milliseconds is reached if timeout is 0, no timeout is set Returned values can be U_WEBSOCKET_STATUS_OPEN or U_WEBSOCKET_STATUS_CLOSE wether the websocket is open or closed, or U_WEBSOCKET_STATUS_ERROR on error </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
